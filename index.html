<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <title>Playlist Al-Baqarah (Ayat 106–141)</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --blue:#2da5dd;
      --muted:#e6f2fb;
      --muted-2:#d5ecfb;
      --text:#21303a;
    }
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background:#f7fbff; color:var(--text); padding:18px; }
    #container { max-width:980px; margin:0 auto; }
    h1 { color:var(--blue); text-align:center; margin:6px 0 8px; }
    .meta { text-align:center; color:#4a4a4a; margin-bottom:12px; font-size:0.95rem; }
    audio#player { width:100%; display:block; margin:12px auto; max-width:900px; }
    .controls { text-align:center; margin-bottom:10px; }
    .btn {
      display:inline-block;
      margin:0 6px;
      padding:8px 12px;
      border-radius:8px;
      background:var(--blue);
      color:white; border:none;
      cursor:pointer;
      font-weight:600;
    }
    .btn:disabled { opacity:0.6; cursor:default; }
    #playlist { list-style:none; padding:0; margin:12px 0 0; max-width:900px; margin-left:auto; margin-right:auto; }
    #playlist li {
      padding:12px 14px;
      margin:7px 0;
      background:var(--muted);
      border:1px solid #cfeefa;
      border-radius:10px;
      cursor:pointer;
      transition:background .12s, transform .06s;
      display:flex;
      align-items:center;
      justify-content:space-between;
    }
    #playlist li:hover { background:var(--muted-2); transform:translateY(-1px); }
    #playlist li.active { background:var(--blue); color:white; font-weight:700; }
    .track-label { text-align:left; }
    .track-number { font-size:0.9rem; color:#666; margin-right:10px; min-width:48px; text-align:right; }
    footer { text-align:center; color:#666; margin-top:16px; font-size:0.85rem; }
    @media (max-width:520px) {
      .track-number { display:none; }
      .btn { padding:7px 10px; margin:0 4px; }
    }
  </style>
</head>
<body>
  <div id="container">
    <h1>Playlist — Surah Al-Baqarah (Ayat 106–141)</h1>
    <div class="meta">Klik salah satu ayat untuk memutar. Pemutaran otomatis lanjut ke ayat berikutnya setelah selesai. Gunakan tombol Prev / Next untuk navigasi cepat.</div>

    <audio id="player" controls preload="none"></audio>

    <div class="controls">
      <button id="prevBtn" class="btn">Prev</button>
      <button id="nextBtn" class="btn">Next</button>
    </div>

    <ul id="playlist"></ul>

    <footer>Hosted on GitHub Pages • Jika pemutaran otomatis tidak bekerja, tekan Play pada pemutar (beberapa browser memblokir autoplay).</footer>
  </div>

  <script>
    // repo info
    const baseRaw = "https://raw.githubusercontent.com/smp-saf/hafalankelas9/main/";

    // daftar nama file sesuai repo (persis seperti yang kamu kirim)
    const files = [
      "115 Al-Baqarah ayat 106.mp3",
        "116 Al-Baqarah ayat 107.mp3",
        "117 Al-Baqarah ayat 108.mp3",
        "118 Al-Baqarah ayat 109.mp3",
        "119 Al-Baqarah ayat 110.mp3",
        "120 Al-Baqarah ayat 111.mp3",
        "121 Al-Baqarah ayat 112.mp3",
        "122 Al-Baqarah ayat 113.mp3",
        "123 Al-Baqarah ayat 114.mp3",
        "124 Al-Baqarah ayat 115.mp3",
        "125 Al-Baqarah ayat 116.mp3",
        "126 Al-Baqarah ayat 117.mp3",
        "127 Al-Baqarah ayat 118.mp3",
        "128 Al-Baqarah ayat 119.mp3",
        "129 Al-Baqarah ayat 120.mp3",
        "130 Al-Baqarah ayat 121.mp3",
        "131 Al-Baqarah ayat 122.mp3",
        "132 Al-Baqarah ayat 123.mp3",
        "133 Al-Baqarah ayat 124.mp3",
        "134 Al-Baqarah ayat 125.mp3",
        "135 Al-Baqarah ayat 126.mp3",
        "136 Al-Baqarah ayat 127.mp3",
        "137 Al-Baqarah ayat 128.mp3",
        "138 Al-Baqarah ayat 129.mp3",
        "139 Al-Baqarah ayat 130.mp3",
        "140 Al-Baqarah ayat 131.mp3",
        "141 Al-Baqarah ayat 132.mp3",
        "142 Al-Baqarah ayat 133.mp3",
        "143 Al-Baqarah ayat 134.mp3",
        "144 Al-Baqarah ayat 135.mp3",
        "145 Al-Baqarah ayat 136.mp3",
        "146 Al-Baqarah ayat 137.mp3",
        "147 Al-Baqarah ayat 138.mp3",
        "148 Al-Baqarah ayat 139.mp3",
        "149 Al-Baqarah ayat 140.mp3",
        "150 Al-Baqarah ayat 141.mp3"
    ];

    const playlistEl = document.getElementById('playlist');
    const player = document.getElementById('player');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');

    let current = 0;

    // helper: label (tampilkan "Ayat N" jika tersedia)
    function labelFromName(name){
      const m = name.match(/ayat\s*(\d+)/i);
      if(m) return "Ayat " + m[1];
      return name.replace(/\.mp3$/i,'');
    }

    // build UI
    files.forEach((name, idx) => {
      const li = document.createElement('li');
      li.className = "";
      const left = document.createElement('div');
      left.style.display = "flex";
      left.style.alignItems = "center";

      const num = document.createElement('div');
      num.className = "track-number";
      num.textContent = (idx+1).toString().padStart(2,'0');

      const label = document.createElement('div');
      label.className = "track-label";
      label.textContent = labelFromName(name);

      left.appendChild(num);
      left.appendChild(label);

      li.appendChild(left);

      li.addEventListener('click', () => { playTrack(idx); });
      li.dataset.src = baseRaw + encodeURIComponent(name);

      playlistEl.appendChild(li);
    });

    const items = playlistEl.querySelectorAll('li');

    function setActive(i){
      items.forEach(x => x.classList.remove('active'));
      if(items[i]) items[i].classList.add('active');
      // enable/disable prev/next
      prevBtn.disabled = (i <= 0);
      nextBtn.disabled = (i >= items.length - 1);
    }

    function playTrack(i){
      if(i < 0 || i >= items.length) return;
      current = i;
      const src = items[i].dataset.src;
      player.src = src;
      setActive(i);
      player.play().catch(err => {
        console.warn("Play blocked or failed:", err);
      });
    }

    function nextTrack(){
      if(current < items.length - 1) playTrack(current + 1);
    }
    function prevTrack(){
      if(current > 0) playTrack(current - 1);
    }

    // events
    player.addEventListener('ended', nextTrack);
    nextBtn.addEventListener('click', nextTrack);
    prevBtn.addEventListener('click', prevTrack);

    // init
    setActive(0);
    // do not force autoplay; user can click play or a track
    // optional: try to load first track so UI ready (but not autoplay)
    items[0] && (player.src = items[0].dataset.src);

    // debug helper: if file not reachable, console shows 404 - you can open raw link in browser to test
  </script>
</body>
</html>
